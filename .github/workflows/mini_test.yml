name: –º—ñ–π –¥—Ä—É–≥–∏–π –º—ñ–Ω—ñ —Ç–µ—Å—Ç —Å–∞–π–ø—Ä–µ—Å–∞ —Ç–∞ –≥—ñ—Ç —Ö–∞–±–∞

on:
  push:
  workflow_dispatch:

jobs:
  cypress-run:
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout (–∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è –∫–æ–¥—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é)
        uses: actions/checkout@v3
      - name: Install and run Cypress tests
        run: |
          npm ci

          npx cypress run
        #   npx cypress run --spec "e2e/**/*.spec.js"
      - run: echo "üí° .(–ø–æ–∫–∞–∑—É—î, —â–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π ${{ github.repository }} –±—É–≤ –∫–ª–æ–Ω–æ–≤–∞–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä). The *** repository has been cloned to the runner"
        # –í–∏–∫–æ–Ω–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É "echo" –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫–µ –ø–æ–∫–∞–∑—É—î, —â–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π ${{ github.repository }} –±—É–≤ –∫–ª–æ–Ω–æ–≤–∞–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
      - run: echo "üçè (–í–∏–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç—É—Å –∑–∞–≤–¥–∞–Ω–Ω—è ${{ job.status }}) This job's status is ."
        # –í–∏–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç—É—Å –∑–∞–≤–¥–∞–Ω–Ω—è
      - name: Cypress run(–∑–∞–ø—É—Å–∫–∞—î–º–æ —Ç–µ—Å—Ç–∏)
        uses: cypress-io/github-action@v5
        with:
          start: npm start
      - name: Create videos directory(—Å—Ç–≤–æ—Ä—é—î–º–æ –ø–∞–ø–∫—É –¥–ª—è –≤—ñ–¥–µ–æ)
        run: mkdir -p cypress/videos
      - name: Save Cypress videos on failure (–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—ñ–¥–µ–æ –¥–ª—è –Ω–µ–ø—Ä–æ–π–¥–µ–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤)
        if: ${{ failure() }}
        run: |
          mkdir -p videos
          mv cypress/videos/*.mp4 videos/
      - name: Upload Artifacts (–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ñ–≤ –∑ –ø–∞–ø–∫–∏ cypress/videos)
        uses: actions/upload-artifact@v2
        with:
          name: Cypress Videos
          path: cypress/videos
